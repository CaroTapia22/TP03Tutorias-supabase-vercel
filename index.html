<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Listado de Productos</title>
  <!-- ============================================= -->
  <!-- üí° Aqu√≠ pod√©s agregar tus estilos o Bootstrap -->
  <!-- Ejemplo: <link rel="stylesheet" href="...bootstrap.css"> -->
  <!-- ============================================= -->
</head>
<body>
  <!-- ============================================= -->
  <!-- üí° Aqu√≠ pod√©s agregar un encabezado o navbar -->
  <!-- ============================================= -->
  <h1>Productos en la Base de Datos</h1>

  <!-- Contenedor donde se mostrar√° la lista -->
  <div id="productos"></div>

  <!-- ============================================= -->
  <!-- üí° Aqu√≠ pod√©s agregar un pie de p√°gina o scripts de dise√±o -->
  <!-- ============================================= -->

  <!-- Librer√≠a Supabase desde CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script>
    // =============================================
    // üîß CONFIGURACI√ìN DE SUPABASE
    // =============================================
    const SUPABASE_URL = "https://oseuyxskmftrbfavymjn.supabase.co";
    const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9zZXV5eHNrbWZ0cmJmYXZ5bWpuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEzMzAwMDQsImV4cCI6MjA3NjkwNjAwNH0.F6iF0QK9G50rYpoMJv73y-Xv1UUqa0PEVfo6LvYHz3I";

    // Crear cliente de conexi√≥n
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    // =============================================
    // üöÄ FUNCI√ìN PARA CONSULTAR LOS PRODUCTOS
    // =============================================
    async function cargarProductos() {
      try {
        // Consulta a la tabla 'productos'
        const { data, error } = await supabase.from("productos").select("*");

        // Si hay error, se muestra mensaje al usuario
        if (error) {
          document.getElementById("productos").innerHTML = 
            `<p style="color:red;">‚ùå Error al cargar los datos: ${error.message}</p>`;
          return;
        }

        // Si no hay datos
        if (!data || data.length === 0) {
          document.getElementById("productos").innerHTML = 
            "<p>No hay productos cargados en la base de datos.</p>";
          return;
        }

        // Crear elementos para mostrar los productos
        const contenedor = document.getElementById("productos");
        const lista = document.createElement("ul");

        data.forEach((item) => {
          const elemento = document.createElement("li");
          elemento.textContent = 
            `ID: ${item.id} | Nombre: ${item.nombre} | Precio: $${item.precio} | Descripci√≥n: ${item.descripcion} | Estado: ${item.estado}`;
          lista.appendChild(elemento);
        });

        contenedor.appendChild(lista);

      } catch (err) {
        // Si hay error general (por ejemplo, sin conexi√≥n)
        document.getElementById("productos").innerHTML = 
          `<p style="color:red;">‚ö†Ô∏è Error inesperado: ${err.message}</p>`;
      }
    }

    // Llamar a la funci√≥n al cargar la p√°gina
    cargarProductos();
  </script>
</body>
</html>
